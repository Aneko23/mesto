(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r){var o=e.data,i=e.handleCardClick,a=e.handleDeleteCardClick,c=e.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=o.name,this._link=o.link,this._id=o._id,this._likes=o.likes,this._handleCardClick=i,this._handleDeleteClick=a,this._handleLikeClick=c,this._selector=n,this._myId=r,this._ownerId=o.owner._id}var n,r;return n=t,(r=[{key:"returnId",value:function(){return this._id}},{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".element__card").cloneNode(!0)}},{key:"_likePicture",value:function(){this._element.querySelector(".like-counter").textContent=this._likes.length,this._isLiked()?this._element.querySelector(".button-like").classList.add("button-like_active"):this._element.querySelector(".button-like").classList.remove("button-like_active")}},{key:"setLikesData",value:function(e){this._likes=e.likes,this._likePicture()}},{key:"deleteHandler",value:function(){this._element.remove(),this._element=null}},{key:"_setEventListeners",value:function(){var e=this;return this._element.querySelector(".button-like").addEventListener("click",(function(){e._handleLikeClick(e._id)})),this._element.querySelector(".delete-button").addEventListener("click",(function(){e._handleDeleteClick()})),this._element.querySelector(".element__image").addEventListener("click",(function(){e._handleCardClick(e._name,e._link)})),this._myId!==this._ownerId?this._element.querySelector(".delete-button").classList.add("delete-button_inactive"):this._element.querySelector(".delete-button").classList.remove("delete-button_active")}},{key:"_isLiked",value:function(){var e=this;return Boolean(this._likes.find((function(t){return t._id===e._myId})))}},{key:"getElement",value:function(){this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".element__name").textContent=this._name;var e=this._element.querySelector(".element__image");return this._element.querySelector(".like-counter").textContent=this._likes.length,this._isLiked()&&this._element.querySelector(".button-like").classList.add("button-like_active"),e.src=this._link,e.alt=this._name,this._element}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t.formSelector,this._config=t,this._formElement=document.querySelector(n),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._errorClass=t.errorClass,this._inputErrorClass=t.inputErrorClass}var t,r;return t=e,(r=[{key:"_enableFormValidation",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._inputSelector)),n=this._formElement.querySelector(this._submitButtonSelector);t.forEach((function(r){r.addEventListener("input",(function(){e._checkInputValidity(r),e._toggleButtonState(t,n)}))})),this._toggleButtonState(t,n)}},{key:"_getErrorMessage",value:function(e){return e.validationMessage}},{key:"_checkInputValidity",value:function(e){if(e.validity.valid)this._hideInputError(e);else{var t=this._getErrorMessage(e);this._showInputError(e,t)}}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));n.textContent=t,n.classList.add(this._inputErrorClass),e.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));n.textContent=t,n.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass)}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._enableFormValidation()}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.classList.add(this._inactiveButtonClass),t.setAttribute("disabled",!0)):(t.classList.remove(this._inactiveButtonClass),t.removeAttribute("disabled"))}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_closeClickOverlay",value:function(e){e.target==e.currentTarget&&this.close()}},{key:"setEventListeners",value:function(){this._popup.querySelector(".close-button").addEventListener("click",this.close.bind(this)),this._popup.addEventListener("click",this._closeClickOverlay.bind(this))}}])&&o(t.prototype,n),e}();function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return s(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._form=t._popup.querySelector(".popup__container"),t._handleFormSubmit=r,t}return t=a,(n=[{key:"_renderLoading",value:function(e){e?(console.log("Есть контакт"),this._form.querySelector(".submit-button").textContent="Сохранение..."):this._form.querySelector(".submit-button").textContent="Сохранить"}},{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._popup.querySelectorAll(".popup__data"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;u(f(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(){e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){u(f(a.prototype),"close",this).call(this),this._form.reset()}}])&&c(t.prototype,n),a}(i);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"open",value:function(e,t){var n=this._popup.querySelector(".popup__pic");this._popup.querySelector(".popup__name").textContent=e,n.src=t,n.alt=e,_(v(a.prototype),"open",this).call(this)}}])&&d(t.prototype,n),a}(i);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.append(e)}},{key:"prependCard",value:function(e){this._container.prepend(e)}},{key:"renderElements",value:function(e){this._renderer(e)}}])&&k(t.prototype,n),e}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t){var n=t.nameSelector,r=t.jobSelector,o=t.userAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._job=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,job:this._job.textContent,avatar:this._avatar.style.backgroundImage.slice(5,-2)}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._job.textContent=e.about,this._avatar.style.backgroundImage="url(".concat(e.avatar,")")}}])&&g(t.prototype,n),e}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._form=t._popup.querySelector(".popup__container"),t._handleFormSubmit=r,t}return t=a,(n=[{key:"setSubmitAction",value:function(e){this._handleFormSubmit=e}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(){event.preventDefault(),e._handleFormSubmit(e.setSubmitAction())}))}}])&&C(t.prototype,n),a}(i),I=(document.querySelector(".popup_type_image"),document.querySelector(".element"),document.querySelector(".profile__name"),document.querySelector(".profile__work"),document.querySelector(".add-button")),q=document.querySelector(".edit-button"),R=document.querySelector(".popup_type_edit"),D=(R.querySelector(".popup__container"),R.querySelector(".popup__data_name")),T=R.querySelector(".popup__data_job"),A=(popupPlace.querySelector(".popup__data_place"),popupPlace.querySelector(".popup__data_link"),popupPlace.querySelector(".submit-button")),x=document.querySelector(".avatar"),U=document.querySelector(".profile__avatar"),B={itemTemplate:".element",formSelector:".popup__container",inputSelector:".popup__data",submitButtonSelector:".submit-button",inactiveButtonClass:"submit-button_inactive",errorClass:"popup__data_error",inputErrorClass:"popup__input-error_active",formNameSelector:".popup__container_name",formPlaceSelector:".popup__container_place",avatarSelector:".popup__container_avatar"};function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M,J=new(function(){function e(t){var n=t.adress,r=t.token,o=t.cohortId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._token=r,this._adress=n,this._cohortId=o}var t,n;return t=e,(n=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"addCard",value:function(e,t){return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then(this._getResponseData)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token}}).then(this._getResponseData)}},{key:"getCards",value:function(){return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/cards"),{headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("Server error")})).then((function(e){return e}))}},{key:"getUserProfile",value:function(){return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/users/me"),{method:"GET",headers:{authorization:this._token}}).then(this._getResponseData)}},{key:"setUserProfile",value:function(e,t){return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then(this._getResponseData)}},{key:"clickLike",value:function(e){return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._getResponseData)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._getResponseData)}},{key:"changeUserAvatar",value:function(e){return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then(this._getResponseData)}}])&&F(t.prototype,n),e}())({adress:"https://mesto.nomoreparties.co",token:"31529348-ed42-4e11-a759-e58383781ff0",cohortId:"cohort-18"}),G=new S({renderer:function(e){var t=Q(e);G.addItem(t)}},".elements"),$=new E({nameSelector:".profile__name",jobSelector:".profile__work",userAvatar:".profile__avatar"}),K=new P({popupSelector:".popup_type_delete",handleFormSubmit:function(){}});function Q(e){var n=new t({data:e,handleCardClick:function(e,t){Z.open(e,t)},handleDeleteCardClick:function(){K.setSubmitAction((function(){var e=n.returnId();J.deleteCard(e).then((function(){n.deleteHandler(),K.close()})).catch((function(e){return alert("Во время удаления карточки возникла ошибка: ".concat(e))}))})),K.open()},handleLikeClick:function(){n._isLiked()?J.deleteLike(n.returnId()).then((function(e){n.setLikesData(N({},e))})).catch((function(e){return console.log("Во время отмены клика произошла проблема : ".concat(e))})):J.clickLike(n.returnId()).then((function(e){n.setLikesData(N({},e))})).catch((function(e){return console.log("Во время клика по сердечку произошла проблема : ".concat(e))}))}},".element",M);return n.getElement()}K.setEventListeners(),q.addEventListener("click",(function(){var e=$.getUserInfo();D.value=e.name,T.value=e.job,X.open()})),x.addEventListener("click",(function(){W.open()})),x.addEventListener("mouseover",(function(){U.style.opacity="0.4",document.querySelector(".edit-pencil").classList.add("edit-pencil_active")})),x.addEventListener("mouseout",(function(){U.style.opacity="1",document.querySelector(".edit-pencil").classList.remove("edit-pencil_active")}));var W=new p({popupSelector:".popup_type_avatar",handleFormSubmit:function(e){W._renderLoading(!0);var t=e.linkInput;J.changeUserAvatar(t).then((function(e){$.setUserInfo({name:e.name,about:e.about,avatar:e.avatar}),W.close()})).catch((function(e){console.log("Ошибка при изменении аватара")})).finally((function(){W._renderLoading(!1)}))}});W.setEventListeners();var X=new p({popupSelector:".popup_type_edit",handleFormSubmit:function(e){X._renderLoading(!0);var t=e.nameInput,n=e.jobInput;J.setUserProfile(t,n).then((function(e){$.setUserInfo({name:e.name,about:e.about,avatar:e.avatar}),X.close()})).catch((function(e){console.log("Ошибка при изменении данных о пользователе")})).finally((function(){X._renderLoading(!1)}))}});X.setEventListeners(),I.addEventListener("click",(function(){var e;Y.open(),(e=A).classList.add("submit-button_inactive"),e.setAttribute("disabled",!0)}));var Y=new p({popupSelector:".popup_type_place",handleFormSubmit:function(e){Y._renderLoading(!0);var t=e.placeInput,n=e.linkInput;J.addCard(t,n).then((function(e){G.prependCard(Q(e)),Y.close()})).catch((function(e){return console.log("Ошибка добавление карточки: ".concat(e))})).finally((function(){Y._renderLoading(!1)}))}});Y.setEventListeners();var Z=new b(".popup_type_image");Z.setEventListeners(),new r(B,B.formPlaceSelector).enableValidation(),new r(B,B.formNameSelector).enableValidation(),new r(B,B.avatarSelector).enableValidation(),Promise.all([J.getUserProfile(),J.getCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];console.log(o),M=o._id,$.setUserInfo({name:o.name,about:o.about,avatar:o.avatar}),G.renderItems(i)})).catch((function(e){alert(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUGljdHVyZVBvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBGb3JtU3VibWl0LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29uc3RhbnMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwibmFtZXMiOlsiQ2FyZCIsInNlbGVjdG9yIiwibXlJZCIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2lkIiwiX2xpa2VzIiwibGlrZXMiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9zZWxlY3RvciIsIl9teUlkIiwiX293bmVySWQiLCJvd25lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX2lzTGlrZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJfbGlrZVBpY3R1cmUiLCJhZGRFdmVudExpc3RlbmVyIiwiQm9vbGVhbiIsImZpbmQiLCJjYXJkIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiaW1hZ2UiLCJzcmMiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiX2Zvcm1TZWxlY3RvciIsIl9jb25maWciLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJpbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnV0dG9uRWxlbWVudCIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwiX2dldEVycm9yTWVzc2FnZSIsIl9zaG93SW5wdXRFcnJvciIsInNvbWUiLCJlcnJvckVsZW1lbnQiLCJpZCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJfZW5hYmxlRm9ybVZhbGlkYXRpb24iLCJfaGFzSW52YWxpZElucHV0Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJfY2xvc2VDbGlja092ZXJsYXkiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJpc0xvYWRpbmciLCJjb25zb2xlIiwibG9nIiwiX2lucHV0TGlzdCIsIl9mb3JtVmFsdWVzIiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlBvcHVwV2l0aEltYWdlIiwiZGF0YU5hbWUiLCJkYXRhTGluayIsInBvcHVwUGljIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaW5pdGlhbEFycmF5IiwiaXRlbSIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiY2FyZHMiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwidXNlckF2YXRhciIsIl9qb2IiLCJfYXZhdGFyIiwiam9iIiwiYXZhdGFyIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJzbGljZSIsImFib3V0IiwiUG9wdXBGb3JtU3VibWl0IiwiYWN0aW9uIiwic2V0U3VibWl0QWN0aW9uIiwiYWRkQnV0dG9uIiwiZWRpdEJ1dHRvbiIsInBvcHVwRWRpdCIsIm5hbWVJbnB1dCIsImpvYklucHV0Iiwic3VibWl0UGxhY2UiLCJwb3B1cFBsYWNlIiwiYXZhdGFyQmxvY2siLCJhdmF0YXJQaG90byIsIml0ZW1UZW1wbGF0ZSIsImZvcm1OYW1lU2VsZWN0b3IiLCJmb3JtUGxhY2VTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwidXNlcklkIiwiYXBpIiwiYWRyZXNzIiwidG9rZW4iLCJjb2hvcnRJZCIsIl90b2tlbiIsIl9hZHJlc3MiLCJfY29ob3J0SWQiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGhlbiIsIl9nZXRSZXNwb25zZURhdGEiLCJyZXN1bHQiLCJjYXJkc0xpc3QiLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsInVzZXJJbmZvIiwiZGVsZXRlQ2FyZFBvcHVwIiwibmV3Q2FyZCIsInRleHQiLCJpbWFnZUNhcmQiLCJvcGVuIiwiY2FyZElkIiwicmV0dXJuSWQiLCJkZWxldGVDYXJkIiwiZGVsZXRlSGFuZGxlciIsImVyciIsImFsZXJ0IiwiZGVsZXRlTGlrZSIsInNldExpa2VzRGF0YSIsImNsaWNrTGlrZSIsImdldEVsZW1lbnQiLCJzZXRFdmVudExpc3RlbmVycyIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJ3aW5kb3dFZGl0Iiwid2luZG93QXZhdGFyIiwiX3JlbmRlckxvYWRpbmciLCJ1c2VyQXZhdGFyTGluayIsImxpbmtJbnB1dCIsImNoYW5nZVVzZXJBdmF0YXIiLCJpbmZvIiwic2V0VXNlckluZm8iLCJlcnJvciIsIm5hbWVVc2VyIiwiam9iVXNlciIsInNldFVzZXJQcm9maWxlIiwid2luZG93QWRkIiwibmFtZURhdGEiLCJwbGFjZUlucHV0IiwibGlua0RhdGEiLCJhZGRDYXJkIiwiY2FyZERhdGEiLCJwcmVwZW5kQ2FyZCIsImVuYWJsZVZhbGlkYXRpb24iLCJhbGwiLCJnZXRVc2VyUHJvZmlsZSIsImdldENhcmRzIiwicmVuZGVySXRlbXMiXSwibWFwcGluZ3MiOiI2TEFBTUEsRSxXQUNGLGFBQTZFQyxFQUFVQyxHQUFNLElBQWhGQyxFQUFnRixFQUFoRkEsS0FBTUMsRUFBMEUsRUFBMUVBLGdCQUFpQkMsRUFBeUQsRUFBekRBLHNCQUF1QkMsRUFBa0MsRUFBbENBLGlCLDRGQUFrQyxTQUN6RkMsS0FBS0MsTUFBUUwsRUFBS00sS0FDbEJGLEtBQUtHLE1BQVFQLEVBQUtRLEtBQ2xCSixLQUFLSyxJQUFNVCxFQUFLUyxJQUNoQkwsS0FBS00sT0FBU1YsRUFBS1csTUFDbkJQLEtBQUtRLGlCQUFtQlgsRUFDeEJHLEtBQUtTLG1CQUFxQlgsRUFDMUJFLEtBQUtVLGlCQUFtQlgsRUFDeEJDLEtBQUtXLFVBQVlqQixFQUNqQk0sS0FBS1ksTUFBUWpCLEVBQ2JLLEtBQUthLFNBQVdqQixFQUFLa0IsTUFBTVQsSSx3REFJM0IsT0FBT0wsS0FBS0ssTSxxQ0FTWixPQUxpQlUsU0FDaEJDLGNBQWNoQixLQUFLVyxXQUNuQk0sUUFDQUQsY0FBYyxrQkFDZEUsV0FBVSxLLHFDQUtYbEIsS0FBS21CLFNBQVNILGNBQWMsaUJBQWlCSSxZQUFjcEIsS0FBS00sT0FBT2UsT0FDbkVyQixLQUFLc0IsV0FDTHRCLEtBQUttQixTQUFTSCxjQUFjLGdCQUFnQk8sVUFBVUMsSUFBSSxzQkFFMUR4QixLQUFLbUIsU0FBU0gsY0FBYyxnQkFBZ0JPLFVBQVVFLE9BQU8sd0IsbUNBSXhEN0IsR0FDVEksS0FBS00sT0FBU1YsRUFBS1csTUFDbkJQLEtBQUswQixpQixzQ0FLTDFCLEtBQUttQixTQUFTTSxTQUNkekIsS0FBS21CLFNBQVcsTywyQ0FHQyxXQWFqQixPQVpBbkIsS0FBS21CLFNBQVNILGNBQWMsZ0JBQWdCVyxpQkFBaUIsU0FBUyxXQUNsRSxFQUFLakIsaUJBQWlCLEVBQUtMLFFBRy9CTCxLQUFLbUIsU0FBU0gsY0FBYyxrQkFBa0JXLGlCQUFpQixTQUFTLFdBQ3BFLEVBQUtsQix3QkFHVFQsS0FBS21CLFNBQVNILGNBQWMsbUJBQW1CVyxpQkFBaUIsU0FBUyxXQUNyRSxFQUFLbkIsaUJBQWlCLEVBQUtQLE1BQU8sRUFBS0UsVUFHdENILEtBQUtZLFFBQVlaLEtBQUthLFNBQ2hCYixLQUFLbUIsU0FBU0gsY0FBYyxrQkFBa0JPLFVBQVVDLElBQUksMEJBRzNEeEIsS0FBS21CLFNBQVNILGNBQWMsa0JBQWtCTyxVQUFVRSxPQUFPLDBCLGlDQUtwRSxXQUNQLE9BQU9HLFFBQVE1QixLQUFLTSxPQUFPdUIsTUFBSyxTQUFBQyxHQUFJLE9BQUlBLEVBQUt6QixNQUFRLEVBQUtPLFksbUNBSTFEWixLQUFLbUIsU0FBV25CLEtBQUsrQixlQUNyQi9CLEtBQUtnQyxxQkFDTGhDLEtBQUttQixTQUFTSCxjQUFjLGtCQUFrQkksWUFBY3BCLEtBQUtDLE1BQ2pFLElBQU1nQyxFQUFRakMsS0FBS21CLFNBQVNILGNBQWMsbUJBUzFDLE9BUkFoQixLQUFLbUIsU0FBU0gsY0FBYyxpQkFBaUJJLFlBQWNwQixLQUFLTSxPQUFPZSxPQUVuRXJCLEtBQUtzQixZQUNMdEIsS0FBS21CLFNBQVNILGNBQWMsZ0JBQWdCTyxVQUFVQyxJQUFJLHNCQUc5RFMsRUFBTUMsSUFBTWxDLEtBQUtHLE1BQ2pCOEIsRUFBTUUsSUFBTW5DLEtBQUtDLE1BQ1ZELEtBQUttQixjLDRMQ3RGYixJQUFNaUIsRUFBYixXQUNJLFdBQVlDLEVBQVFDLEksNEZBQWMsU0FDOUJ0QyxLQUFLdUMsY0FBZ0JGLEVBQU9DLGFBQzVCdEMsS0FBS3dDLFFBQVVILEVBQ2ZyQyxLQUFLeUMsYUFBZTFCLFNBQVNDLGNBQWNzQixHQUMzQ3RDLEtBQUswQyxlQUFpQkwsRUFBT00sY0FDN0IzQyxLQUFLNEMsc0JBQXdCUCxFQUFPUSxxQkFDcEM3QyxLQUFLOEMscUJBQXVCVCxFQUFPVSxvQkFDbkMvQyxLQUFLZ0QsWUFBY1gsRUFBT1ksV0FDMUJqRCxLQUFLa0QsaUJBQW1CYixFQUFPYyxnQixRQVR2QyxPLEVBQUEsRyxFQUFBLCtDQVk2QixXQUNmQyxFQUFZQyxNQUFNQyxLQUFLdEQsS0FBS3lDLGFBQWFjLGlCQUFpQnZELEtBQUswQyxpQkFDL0RjLEVBQWdCeEQsS0FBS3lDLGFBQWF6QixjQUFjaEIsS0FBSzRDLHVCQUUzRFEsRUFBVUssU0FBUSxTQUFDQyxHQUNmQSxFQUFhL0IsaUJBQWlCLFNBQVMsV0FDckMsRUFBS2dDLG9CQUFxQkQsR0FDMUIsRUFBS0UsbUJBQW1CUixFQUFXSSxTQUl6Q3hELEtBQUs0RCxtQkFBbUJSLEVBQVdJLEtBdkIzQyx1Q0EwQnFCRSxHQUNiLE9BQU9BLEVBQWFHLG9CQTNCNUIsMENBOEJ3QkgsR0FHaEIsR0FGeUJBLEVBQWFJLFNBQVNDLE1BUTNDL0QsS0FBS2dFLGdCQUFnQk4sT0FOSixDQUNqQixJQUFNTyxFQUFlakUsS0FBS2tFLGlCQUFpQlIsR0FFM0MxRCxLQUFLbUUsZ0JBQWdCVCxFQUFjTyxNQXBDL0MsdUNBMkNxQmIsR0FDYixPQUFPQSxFQUFVZ0IsTUFBSyxTQUFDVixHQUFELE9BQW1CQSxFQUFhSSxTQUFTQyxXQTVDdkUsc0NBK0NvQkwsRUFBY08sR0FDMUIsSUFBTUksRUFBZXJFLEtBQUt5QyxhQUFhekIsY0FBbEIsV0FBb0MwQyxFQUFhWSxHQUFqRCxXQUVyQkQsRUFBYWpELFlBQWM2QyxFQUMzQkksRUFBYTlDLFVBQVVDLElBQUl4QixLQUFLa0Qsa0JBQ2hDUSxFQUFhbkMsVUFBVUMsSUFBSXhCLEtBQUtnRCxlQXBEeEMsc0NBdURvQlUsRUFBY08sR0FDMUIsSUFBTUksRUFBZXJFLEtBQUt5QyxhQUFhekIsY0FBbEIsV0FBb0MwQyxFQUFhWSxHQUFqRCxXQUVyQkQsRUFBYWpELFlBQWM2QyxFQUMzQkksRUFBYTlDLFVBQVVFLE9BQU96QixLQUFLa0Qsa0JBQ25DUSxFQUFhbkMsVUFBVUUsT0FBT3pCLEtBQUtnRCxlQTVEM0MseUNBb0VRaEQsS0FBS3lDLGFBQWFkLGlCQUFpQixVQUpULFNBQUM0QyxHQUN6QkEsRUFBTUMsb0JBS1J4RSxLQUFLeUUsMEJBdEViLHlDQXlFdUJyQixFQUFXSSxHQUN0QnhELEtBQUswRSxpQkFBaUJ0QixJQUN0QkksRUFBY2pDLFVBQVVDLElBQUl4QixLQUFLOEMsc0JBQ2pDVSxFQUFjbUIsYUFBYSxZQUFZLEtBRXZDbkIsRUFBY2pDLFVBQVVFLE9BQU96QixLQUFLOEMsc0JBQ3BDVSxFQUFjb0IsZ0JBQWdCLGtCLGlCQS9FMUMsSyxzS0NBTyxJQUFNQyxFQUFiLFdBQ0ksV0FBWUMsSSw0RkFBZSxTQUN2QjlFLEtBQUsrRSxPQUFTaEUsU0FBU0MsY0FBYzhELEdBQ3JDOUUsS0FBS2dGLGdCQUFrQmhGLEtBQUtnRixnQkFBZ0JDLEtBQUtqRixNLFFBSHpELE8sRUFBQSxHLEVBQUEsOEJBT1FBLEtBQUsrRSxPQUFPeEQsVUFBVUMsSUFBSSxnQkFDMUJULFNBQVNZLGlCQUFpQixVQUFXM0IsS0FBS2dGLG1CQVJsRCw4QkFZUWhGLEtBQUsrRSxPQUFPeEQsVUFBVUUsT0FBTyxnQkFDN0JWLFNBQVNtRSxvQkFBb0IsVUFBV2xGLEtBQUtnRixtQkFickQsc0NBZ0JvQlQsR0FDTSxXQUFkQSxFQUFNWSxLQUNObkYsS0FBS29GLFVBbEJqQix5Q0FzQnVCYixHQUNYQSxFQUFNYyxRQUFVZCxFQUFNZSxlQUN0QnRGLEtBQUtvRixVQXhCakIsMENBNkJRcEYsS0FBSytFLE9BQU8vRCxjQUFjLGlCQUFpQlcsaUJBQWlCLFFBQVMzQixLQUFLb0YsTUFBTUgsS0FBS2pGLE9BQ3JGQSxLQUFLK0UsT0FBT3BELGlCQUFpQixRQUFTM0IsS0FBS3VGLG1CQUFtQk4sS0FBS2pGLFksaUJBOUIzRSxLLDhrQ0NFTyxJQUFNd0YsRUFBYixhLGtPQUFBLFUsUUFBQSxHLEVBQUEsRSwwWUFDSSxjQUE4QyxNQUFqQ1YsRUFBaUMsRUFBakNBLGNBQWVXLEVBQWtCLEVBQWxCQSxpQkFBa0IsTyw0RkFBQSxVQUMxQyxjQUFNWCxJQUNEWSxNQUFRLEVBQUtYLE9BQU8vRCxjQUFjLHFCQUN2QyxFQUFLMkUsa0JBQW9CRixFQUhpQixFQURsRCxPLEVBQUEsRyxFQUFBLHNDQU9tQkcsR0FDUkEsR0FDQ0MsUUFBUUMsSUFBSSxnQkFDWjlGLEtBQUswRixNQUFNMUUsY0FBYyxrQkFBa0JJLFlBQWMsaUJBRXpEcEIsS0FBSzBGLE1BQU0xRSxjQUFjLGtCQUFrQkksWUFBYyxjQVpyRSx3Q0FnQnNCLFdBTWQsT0FMQXBCLEtBQUsrRixXQUFhL0YsS0FBSytFLE9BQU94QixpQkFBaUIsZ0JBQy9DdkQsS0FBS2dHLFlBQWMsR0FDbkJoRyxLQUFLK0YsV0FBV3RDLFNBQVEsU0FBQzdELEdBQ3JCLEVBQUtvRyxZQUFZcEcsRUFBS00sTUFBUU4sRUFBS3FHLFNBRWhDakcsS0FBS2dHLGNBdEJwQiwwQ0EwQndCLFdBQ2hCLHNEQUNBaEcsS0FBSzBGLE1BQU0vRCxpQkFBaUIsVUFBVSxXQUNsQyxFQUFLZ0Usa0JBQWtCLEVBQUtPLHdCQTdCeEMsOEJBa0NRLDBDQUNBbEcsS0FBSzBGLE1BQU1TLGEsaUJBbkNuQixHQUFtQ3RCLEcsOGtDQ0E1QixJQUFNdUIsRUFBYixhLGtPQUFBLFUsUUFBQSxHLEVBQUEsRSwwWUFDSSxXQUFZdEIsR0FBYyxPLDRGQUFBLHFCQUNoQkEsR0FGZCxPLEVBQUEsRyxFQUFBLDRCQUtTdUIsRUFBVUMsR0FDWCxJQUFNQyxFQUFXdkcsS0FBSytFLE9BQU8vRCxjQUFjLGVBQzNDaEIsS0FBSytFLE9BQU8vRCxjQUFlLGdCQUFpQkksWUFBY2lGLEVBQzFERSxFQUFTckUsSUFBTW9FLEVBQ2ZDLEVBQVNwRSxJQUFNa0UsRUFDZiw4QyxpQkFWUixHQUFvQ3hCLEcsc0tDRjdCLElBQU0yQixFQUFiLFdBQ0ksYUFBd0JDLEdBQW1CLElBQTlCQyxFQUE4QixFQUE5QkEsVSw0RkFBOEIsU0FDdkMxRyxLQUFLMkcsVUFBWUQsRUFDakIxRyxLQUFLNEcsV0FBYTdGLFNBQVNDLGNBQWN5RixHLFFBSGpELE8sRUFBQSxHLEVBQUEsbUNBTWdCSSxHQUFjLFdBQ3RCQSxFQUFhcEQsU0FBUSxTQUFBcUQsR0FBSSxPQUFJLEVBQUtILFVBQVVHLFFBUHBELDhCQVVZQyxHQUNKL0csS0FBSzRHLFdBQVdJLE9BQU9ELEtBWC9CLGtDQWNnQkEsR0FDUi9HLEtBQUs0RyxXQUFXSyxRQUFRRixLQWZoQyxxQ0FrQm1CRyxHQUNYbEgsS0FBSzJHLFVBQVVPLFEsaUJBbkJ2QixLLHNLQ0FPLElBQU1DLEVBQWIsV0FDSSxjQUFxRCxJQUF4Q0MsRUFBd0MsRUFBeENBLGFBQWNDLEVBQTBCLEVBQTFCQSxZQUFhQyxFQUFhLEVBQWJBLFksNEZBQWEsU0FDakR0SCxLQUFLQyxNQUFRYyxTQUFTQyxjQUFjb0csR0FDcENwSCxLQUFLdUgsS0FBT3hHLFNBQVNDLGNBQWNxRyxHQUNuQ3JILEtBQUt3SCxRQUFVekcsU0FBU0MsY0FBY3NHLEcsUUFKOUMsTyxFQUFBLEcsRUFBQSxxQ0FjUSxNQUxpQixDQUNicEgsS0FBTUYsS0FBS0MsTUFBTW1CLFlBQ2pCcUcsSUFBS3pILEtBQUt1SCxLQUFLbkcsWUFDZnNHLE9BQVExSCxLQUFLd0gsUUFBUUcsTUFBTUMsZ0JBQWdCQyxNQUFNLEdBQUcsTUFaaEUsa0NBaUJlakksR0FDUEksS0FBS0MsTUFBTW1CLFlBQWN4QixFQUFLTSxLQUM5QkYsS0FBS3VILEtBQUtuRyxZQUFjeEIsRUFBS2tJLE1BQzdCOUgsS0FBS3dILFFBQVFHLE1BQU1DLGdCQUFuQixjQUE0Q2hJLEVBQUs4SCxPQUFqRCxVLGlCQXBCUixLLHV5QkNFTyxJQUFNSyxFQUFiLGEsa09BQUEsVSxRQUFBLEcsRUFBQSxFLDBZQUNJLGNBQThDLE1BQWpDakQsRUFBaUMsRUFBakNBLGNBQWVXLEVBQWtCLEVBQWxCQSxpQkFBa0IsTyw0RkFBQSxVQUMxQyxjQUFNWCxJQUNEWSxNQUFRLEVBQUtYLE9BQU8vRCxjQUFjLHFCQUN2QyxFQUFLMkUsa0JBQW9CRixFQUhpQixFQURsRCxPLEVBQUEsRyxFQUFBLHVDQU9vQnVDLEdBQ1poSSxLQUFLMkYsa0JBQW9CcUMsSUFSakMsMENBV3dCLFdBQ2hCaEksS0FBSzBGLE1BQU0vRCxpQkFBaUIsVUFBVSxXQUNsQzRDLE1BQU1DLGlCQUNOLEVBQUttQixrQkFBa0IsRUFBS3NDLDJCLGlCQWR4QyxHQUFxQ3BELEdDTXhCcUQsR0FSTW5ILFNBQVNDLGNBQWMscUJBQ3RCRCxTQUFTQyxjQUFjLFlBR3ZCRCxTQUFTQyxjQUFjLGtCQUN4QkQsU0FBU0MsY0FBYyxrQkFHakJELFNBQVNDLGNBQWMsZ0JBR25DbUgsRUFBYXBILFNBQVNDLGNBQWMsZ0JBQzNDb0gsRUFBWXJILFNBQVNDLGNBQWMsb0JBSW5DcUgsR0FIV0QsRUFBVXBILGNBQWMscUJBR3ZCb0gsRUFBVXBILGNBQWMsc0JBQ3BDc0gsRUFBV0YsRUFBVXBILGNBQWMsb0JBSzVCdUgsR0FGTUMsV0FBV3hILGNBQWMsc0JBQzFCd0gsV0FBV3hILGNBQWMscUJBQ2hCd0gsV0FBV3hILGNBQWMsbUJBR3ZDeUgsRUFBYzFILFNBQVNDLGNBQWMsV0FDckMwSCxFQUFjM0gsU0FBU0MsY0FBYyxvQkFHckNxQixFQUFTLENBQ2xCc0csYUFBYyxXQUNkckcsYUFBYyxvQkFDZEssY0FBZSxlQUNmRSxxQkFBc0IsaUJBQ3RCRSxvQkFBcUIseUJBQ3JCRSxXQUFZLG9CQUNaRSxnQkFBaUIsNEJBQ2pCeUYsaUJBQWtCLHlCQUNsQkMsa0JBQW1CLDBCQUNuQkMsZUFBZ0IsNEIsdThCQzNCcEIsSUFNSUMsRUFORUMsRUFBTSxJQ1paLFdBQ0ksY0FBdUMsSUFBMUJDLEVBQTBCLEVBQTFCQSxPQUFRQyxFQUFrQixFQUFsQkEsTUFBT0MsRUFBVyxFQUFYQSxVLDRGQUFXLFNBQ25DbkosS0FBS29KLE9BQVNGLEVBQ2RsSixLQUFLcUosUUFBVUosRUFDZmpKLEtBQUtzSixVQUFZSCxFLFFBSnpCLE8sRUFBQSxHLEVBQUEsd0NBT3FCSSxHQUNiLE9BQUtBLEVBQUlDLEdBR0ZELEVBQUlFLE9BRkFDLFFBQVFDLE9BQVIsa0JBQTBCSixFQUFJSyxXQVRqRCw4QkFjWTFKLEVBQU1FLEdBQ1YsT0FBT3lKLE1BQU0sR0FBRCxPQUFJN0osS0FBS3FKLFFBQVQsZUFBdUJySixLQUFLc0osVUFBNUIsVUFBK0MsQ0FDdkRRLE9BQVEsT0FDUkMsUUFBUyxDQUNMQyxjQUFlaEssS0FBS29KLE9BQ3BCLGVBQWdCLG9CQUVwQmEsS0FBTUMsS0FBS0MsVUFBVSxDQUNqQmpLLE9BQ0FFLFdBR1BnSyxLQUFLcEssS0FBS3FLLG9CQTFCbkIsaUNBNkJlL0YsR0FDUCxPQUFPdUYsTUFBTSxHQUFELE9BQUk3SixLQUFLcUosUUFBVCxlQUF1QnJKLEtBQUtzSixVQUE1QixrQkFBK0NoRixHQUFNLENBQzdEd0YsT0FBUSxTQUNSQyxRQUFTLENBQ0xDLGNBQWVoSyxLQUFLb0osVUFHM0JnQixLQUFLcEssS0FBS3FLLG9CQXBDbkIsaUNBeUNRLE9BQU9SLE1BQU0sR0FBRCxPQUFJN0osS0FBS3FKLFFBQVQsZUFBdUJySixLQUFLc0osVUFBNUIsVUFBK0MsQ0FDdkRTLFFBQVMsQ0FDTEMsY0FBZWhLLEtBQUtvSixVQUV6QmdCLE1BQUssU0FBQ0UsR0FDTCxPQUFLQSxFQUFPZCxHQUdMYyxFQUFPYixPQUZIQyxRQUFRQyxPQUFPLG1CQUczQlMsTUFBSyxTQUFDeEssR0FDTCxPQUFPQSxPQW5EbkIsdUNBd0RRLE9BQU9pSyxNQUFNLEdBQUQsT0FBSTdKLEtBQUtxSixRQUFULGVBQXVCckosS0FBS3NKLFVBQTVCLGFBQWtELENBQzlEUSxPQUFRLE1BQ1JDLFFBQVMsQ0FDTEMsY0FBZWhLLEtBQUtvSixVQUczQmdCLEtBQUtwSyxLQUFLcUssb0JBOURmLHFDQWlFaUJuSyxFQUFNNEgsR0FDbkIsT0FBTytCLE1BQU0sR0FBRCxPQUFJN0osS0FBS3FKLFFBQVQsZUFBdUJySixLQUFLc0osVUFBNUIsYUFBa0QsQ0FDMURRLE9BQVEsUUFDUkMsUUFBUyxDQUNMQyxjQUFlaEssS0FBS29KLE9BQ3BCLGVBQWdCLG9CQUVwQmEsS0FBTUMsS0FBS0MsVUFBVSxDQUNqQmpLLE9BQ0E0SCxZQUdQc0MsS0FBS3BLLEtBQUtxSyxvQkE3RWYsZ0NBZ0ZZL0YsR0FDUixPQUFPdUYsTUFBTSxHQUFELE9BQUk3SixLQUFLcUosUUFBVCxlQUF1QnJKLEtBQUtzSixVQUE1Qix3QkFBcURoRixHQUFNLENBQ25Fd0YsT0FBUSxNQUNSQyxRQUFTLENBQ0xDLGNBQWVoSyxLQUFLb0osT0FDcEIsZUFBZ0Isc0JBR3ZCZ0IsS0FBS3BLLEtBQUtxSyxvQkF4RmYsaUNBMkZhL0YsR0FDVCxPQUFPdUYsTUFBTSxHQUFELE9BQUk3SixLQUFLcUosUUFBVCxlQUF1QnJKLEtBQUtzSixVQUE1Qix3QkFBcURoRixHQUFNLENBQ25Fd0YsT0FBUSxTQUNSQyxRQUFTLENBQ0xDLGNBQWVoSyxLQUFLb0osT0FDcEIsZUFBZ0Isc0JBR3ZCZ0IsS0FBS3BLLEtBQUtxSyxvQkFuR2YsdUNBdUdtQjNDLEdBQ2YsT0FBT21DLE1BQU0sR0FBRCxPQUFJN0osS0FBS3FKLFFBQVQsZUFBdUJySixLQUFLc0osVUFBNUIsb0JBQXlELENBQ2pFUSxPQUFRLFFBQ1JDLFFBQVMsQ0FDTEMsY0FBZWhLLEtBQUtvSixPQUNwQixlQUFnQixvQkFFcEJhLEtBQU1DLEtBQUtDLFVBQVUsQ0FDakJ6QyxhQUdIMEMsS0FBS3BLLEtBQUtxSyx1QixpQkFsSG5CLEtEWVksQ0FBUyxDQUNqQnBCLE9BQVEsaUNBQ1JDLE1BQU8sdUNBQ1BDLFNBQVEsY0FNRm9CLEVBQVksSUFBSS9ELEVBQVEsQ0FDMUJFLFNBQVUsU0FBQzlHLEdBQ1AsSUFBTW1ILEVBQVV5RCxFQUFXNUssR0FDM0IySyxFQUFVRSxRQUFRMUQsS0FFdkIsYUFHRDJELEVBQVcsSUFBSXZELEVBQVMsQ0FDMUJDLGFBQWMsaUJBQ2RDLFlBQWEsaUJBQ2JDLFdBQVkscUJBSVZxRCxFQUFrQixJQUFJNUMsRUFBZ0IsQ0FDeENqRCxjQUFlLHFCQUNmVyxpQkFBa0IsZUFNdEIsU0FBUytFLEVBQVc1SyxHQUNoQixJQUFNZ0wsRUFBVSxJQUFJbkwsRUFBSyxDQUNyQkcsT0FDQUMsZ0JBQWlCLFNBQUNnTCxFQUFNekssR0FDcEIwSyxFQUFVQyxLQUFLRixFQUFNekssSUFFekJOLHNCQUF1QixXQUNuQjZLLEVBQWdCMUMsaUJBQWdCLFdBQzVCLElBQU0rQyxFQUFTSixFQUFRSyxXQUN0QmpDLEVBQUlrQyxXQUFXRixHQUNmWixNQUFLLFdBQ0ZRLEVBQVFPLGdCQUNSUixFQUFnQnZGLFdBSG5CLE9BS00sU0FBQWdHLEdBQUcsT0FBSUMsTUFBTSwrQ0FBRCxPQUFnREQsVUFFdkVULEVBQWdCSSxRQUVsQmhMLGdCQUFpQixXQUNWNkssRUFBUXRKLFdBT1QwSCxFQUFJc0MsV0FBV1YsRUFBUUssWUFDdEJiLE1BQUssU0FBQ3hLLEdBQ0hnTCxFQUFRVyxhQUFSLEtBQXlCM0wsT0FGN0IsT0FJTyxTQUFBd0wsR0FBRyxPQUFJdkYsUUFBUUMsSUFBUixxREFBMERzRixPQVZ4RXBDLEVBQUl3QyxVQUFVWixFQUFRSyxZQUNyQmIsTUFBSyxTQUFDeEssR0FDSGdMLEVBQVFXLGFBQVIsS0FBeUIzTCxPQUY3QixPQUlPLFNBQUF3TCxHQUFHLE9BQUl2RixRQUFRQyxJQUFSLDBEQUErRHNGLFNBVXRGLFdBQVlyQyxHQUNkLE9BQU82QixFQUFRYSxhQXRDcEJkLEVBQWdCZSxvQkEyQ2hCdkQsRUFBV3hHLGlCQUFpQixTQUFTLFdBQ2pDLElBQU1nSyxFQUFXakIsRUFBU2tCLGNBQzFCdkQsUUFBa0JzRCxFQUFTekwsS0FDM0JvSSxRQUFpQnFELEVBQVNsRSxJQUMxQm9FLEVBQVdkLFVBSWZ0QyxFQUFZOUcsaUJBQWlCLFNBQVMsV0FDbENtSyxFQUFhZixVQUdqQnRDLEVBQVk5RyxpQkFBaUIsYUFBYSxXQUN0QytHLGdCQUE0QixNQUM1QjNILFNBQVNDLGNBQWMsZ0JBQWdCTyxVQUFVQyxJQUFJLHlCQUd6RGlILEVBQVk5RyxpQkFBaUIsWUFBWSxXQUNyQytHLGdCQUE0QixJQUM1QjNILFNBQVNDLGNBQWMsZ0JBQWdCTyxVQUFVRSxPQUFPLHlCQUk1RCxJQUFNcUssRUFBZSxJQUFJdEcsRUFBYyxDQUNuQ1YsY0FBZSxxQkFDZlcsaUJBQWtCLFNBQUM3RixHQUNma00sRUFBYUMsZ0JBQWUsR0FDNUIsSUFBTUMsRUFBaUJwTSxFQUFLcU0sVUFDNUJqRCxFQUFJa0QsaUJBQWlCRixHQUNwQjVCLE1BQUssU0FBQytCLEdBQ0h6QixFQUFTMEIsWUFBWSxDQUNqQmxNLEtBQU1pTSxFQUFLak0sS0FDWDRILE1BQU9xRSxFQUFLckUsTUFDWkosT0FBUXlFLEVBQUt6RSxTQUVqQm9FLEVBQWExRyxXQVBqQixPQVNRLFNBQUNpSCxHQUNMeEcsUUFBUUMsSUFBSSxtQ0FWaEIsU0FZUyxXQUNMZ0csRUFBYUMsZ0JBQWUsU0FJeENELEVBQWFKLG9CQUdiLElBQU1HLEVBQWEsSUFBSXJHLEVBQWMsQ0FDakNWLGNBQWUsbUJBQ2ZXLGlCQUFrQixTQUFDN0YsR0FDZmlNLEVBQVdFLGdCQUFlLEdBQzFCLElBQU1PLEVBQVcxTSxFQUFLeUksVUFDaEJrRSxFQUFVM00sRUFBSzBJLFNBQ3JCVSxFQUFJd0QsZUFBZUYsRUFBVUMsR0FDeEJuQyxNQUFLLFNBQUMrQixHQUNIekIsRUFBUzBCLFlBQVksQ0FDakJsTSxLQUFNaU0sRUFBS2pNLEtBQ1g0SCxNQUFPcUUsRUFBS3JFLE1BQ1pKLE9BQVF5RSxFQUFLekUsU0FFakJtRSxFQUFXekcsV0FQbkIsT0FTSSxTQUFDaUgsR0FDTHhHLFFBQVFDLElBQUksaURBVlosU0FZSyxXQUNMK0YsRUFBV0UsZ0JBQWUsU0FJbENGLEVBQVdILG9CQUdYeEQsRUFBVXZHLGlCQUFpQixTQUFTLFdBOEJwQyxJQUE2QjZCLEVBN0J6QmlKLEVBQVUxQixRQTZCZXZILEVBNUJOK0UsR0E2QkxoSCxVQUFVQyxJQUFJLDBCQUM1QmdDLEVBQWNtQixhQUFhLFlBQVksTUF6QjNDLElBQU04SCxFQUFZLElBQUlqSCxFQUFjLENBQ2hDVixjQUFlLG9CQUNmVyxpQkFBa0IsU0FBQzdGLEdBQ2Y2TSxFQUFVVixnQkFBZSxHQUN6QixJQUFNVyxFQUFXOU0sRUFBSytNLFdBQ2hCQyxFQUFXaE4sRUFBS3FNLFVBQ3RCakQsRUFBSTZELFFBQVFILEVBQVVFLEdBQ2pCeEMsTUFBSyxTQUFDMEMsR0FDSHZDLEVBQVV3QyxZQUFZdkMsRUFBV3NDLElBQ2pDTCxFQUFVckgsV0FIbEIsT0FLVyxTQUFBZ0csR0FBRyxPQUFJdkYsUUFBUUMsSUFBUixzQ0FBMkNzRixPQUw3RCxTQU1hLFdBQ0xxQixFQUFVVixnQkFBZSxTQUd6Q1UsRUFBVWYsb0JBR1YsSUFBTVosRUFBWSxJQUFJMUUsRUFBZSxxQkFDckMwRSxFQUFVWSxvQkFRaUIsSUFBSXRKLEVBQWNDLEVBQVFBLEVBQU93RyxtQkFDekNtRSxtQkFFTyxJQUFJNUssRUFBY0MsRUFBUUEsRUFBT3VHLGtCQUN6Q29FLG1CQUVVLElBQUk1SyxFQUFjQyxFQUFRQSxFQUFPeUcsZ0JBQ3pDa0UsbUJBRXBCdEQsUUFBUXVELElBQUksQ0FBQ2pFLEVBQUlrRSxpQkFBa0JsRSxFQUFJbUUsYUFDdEMvQyxNQUNHLFlBQW1CLEksSUFBQSxHLEVBQUEsRSw0Q0FBQSxJLG93QkFBakJ4SyxFQUFpQixLQUFYc0gsRUFBVyxLQUNmckIsUUFBUUMsSUFBSWxHLEdBQ1ptSixFQUFTbkosRUFBS1MsSUFDZHFLLEVBQVMwQixZQUFZLENBQ2pCbE0sS0FBTU4sRUFBS00sS0FDWDRILE1BQU9sSSxFQUFLa0ksTUFDWkosT0FBUTlILEVBQUs4SCxTQUVqQjZDLEVBQVU2QyxZQUFZbEcsTUFWOUIsT0FhTyxTQUFBa0UsR0FDSEMsTUFBTUQsTyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3Ioe2RhdGEsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2FyZENsaWNrLCBoYW5kbGVMaWtlQ2xpY2t9LCBzZWxlY3RvciwgbXlJZCkge1xuICAgICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgICAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xuICAgICAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDYXJkQ2xpY2s7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcbiAgICAgICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fbXlJZCA9IG15SWQ7XG4gICAgICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB9O1xuXG4gICAgcmV0dXJuSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZDtcbiAgICB9XG5cbiAgICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgICAgIGNvbnN0IGNhcmRJdGVtID0gZG9jdW1lbnRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXG4gICAgICAgIC5jb250ZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fY2FyZCcpXG4gICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIHJldHVybiBjYXJkSXRlbTtcbiAgICB9O1xuXG4gICAgX2xpa2VQaWN0dXJlKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saWtlLWNvdW50ZXInKS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICAgICAgaWYgKHRoaXMuX2lzTGlrZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWxpa2UnKS5jbGFzc0xpc3QuYWRkKCdidXR0b24tbGlrZV9hY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1saWtlJykuY2xhc3NMaXN0LnJlbW92ZSgnYnV0dG9uLWxpa2VfYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRMaWtlc0RhdGEoZGF0YSkge1xuICAgICAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgICAgIHRoaXMuX2xpa2VQaWN0dXJlKCk7XG4gICAgICAgIFxuICAgIH1cblxuICAgIGRlbGV0ZUhhbmRsZXIoKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgIH1cblxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWxpa2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLl9pZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmRlbGV0ZS1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKCk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAoKHRoaXMuX215SWQpICE9PSAodGhpcy5fb3duZXJJZCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGUtYnV0dG9uJykuY2xhc3NMaXN0LmFkZCgnZGVsZXRlLWJ1dHRvbl9pbmFjdGl2ZScpO1xuICAgICAgICAgfVxuICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmRlbGV0ZS1idXR0b24nKS5jbGFzc0xpc3QucmVtb3ZlKCdkZWxldGUtYnV0dG9uX2FjdGl2ZScpO1xuICAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgX2lzTGlrZWQoKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuX2xpa2VzLmZpbmQoY2FyZCA9PiBjYXJkLl9pZCA9PT0gdGhpcy5fbXlJZCkpXG4gICAgfVxuXG4gICAgZ2V0RWxlbWVudCgpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX25hbWUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubGlrZS1jb3VudGVyJykudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG5cbiAgICAgICAgaWYgKHRoaXMuX2lzTGlrZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWxpa2UnKS5jbGFzc0xpc3QuYWRkKCdidXR0b24tbGlrZV9hY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgICAgIGltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuXG4gICAgICAgIFxuICAgIH1cbn1cblxuICBleHBvcnQge0NhcmR9O1xuICAiLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gY29uZmlnLmZvcm1TZWxlY3RvcjsgLy8nLnBvcHVwX19jb250YWluZXInXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjsgLy8nLnBvcHVwX19kYXRhJ1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjsgLy8nLnN1Ym1pdC1idXR0b24nXG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzczsgLy8nc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZSdcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzOyAvLydwb3B1cF9fZGF0YV9lcnJvcidcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzczsgLy8ncG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZSdcbiAgICB9XG5cbiAgICBfZW5hYmxlRm9ybVZhbGlkYXRpb24gKCkge1xuICAgICAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgICAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgICAgIFxuICAgICAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KCBpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XG4gICAgfVxuXG4gICAgX2dldEVycm9yTWVzc2FnZShpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICB9XG5cbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgICAgICBjb25zdCBpc0lucHV0Tm90VmFsaWQgPSAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIFxuICAgICAgICBpZiAoaXNJbnB1dE5vdFZhbGlkKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9nZXRFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgIC8v0L/QvtC60LDQt9Cw0YLRjCDRgdC+0L7QsdGJ0LXQvdC40LUg0YEg0L7RiNC40LHQutC+0LlcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8v0YHQutGA0YvRgtGMINGB0L7QvtCx0YnQtdC90LjQtSDRgSDQvtGI0LjQsdC60L7QuVxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KXtcbiAgICAgICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICAgICAgfVxuXG4gICAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcblxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIH1cbiAgICAgIFxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgfVxuICAgIFxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgICAgIGNvbnN0IHN1Ym1pdEZvcm1IYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHN1Ym1pdEZvcm1IYW5kbGVyKTtcbiAgICBcbiAgICAgICAgdGhpcy5fZW5hYmxlRm9ybVZhbGlkYXRpb24oKTtcbiAgICAgIH07XG4gICAgXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCkge1xuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgICAgICBidXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICAgICAgICB9XG4gICAgfVxufSIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKVxuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2Nsb3NlQ2xpY2tPdmVybGF5KGV2ZW50KSB7IFxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHsgXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7IFxuICAgICAgICB9IFxuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuY2xvc2UtYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2Nsb3NlQ2xpY2tPdmVybGF5LmJpbmQodGhpcykpO1xuICAgIH1cbn0iLCJpbXBvcnQge1BvcHVwfSBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXR9KXtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB9XG5cbiAgICBfcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICAgICAgaWYoaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn0JXRgdGC0Ywg0LrQvtC90YLQsNC60YInKVxuICAgICAgICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcuc3VibWl0LWJ1dHRvbicpLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJzsgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcuc3VibWl0LWJ1dHRvbicpLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC40YLRjCc7ICBcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2RhdGEnKTtcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZm9ybVZhbHVlc1tkYXRhLm5hbWVdID0gZGF0YS52YWx1ZTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gICAgICAgIFxuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1BvcHVwfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwLmpzJztcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3Ipe1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBvcGVuKGRhdGFOYW1lLCBkYXRhTGluaykge1xuICAgICAgICBjb25zdCBwb3B1cFBpYyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcGljJylcbiAgICAgICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcigoJy5wb3B1cF9fbmFtZScpKS50ZXh0Q29udGVudCA9IGRhdGFOYW1lO1xuICAgICAgICBwb3B1cFBpYy5zcmMgPSBkYXRhTGluaztcbiAgICAgICAgcG9wdXBQaWMuYWx0ID0gZGF0YU5hbWU7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHtyZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKGluaXRpYWxBcnJheSkge1xuICAgICAgICBpbml0aWFsQXJyYXkuZm9yRWFjaChpdGVtID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcbiAgICB9XG5cbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgICB9XG5cbiAgICBwcmVwZW5kQ2FyZChlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpOyBcbiAgICB9XG5cbiAgICByZW5kZXJFbGVtZW50cyhjYXJkcykge1xuICAgICAgICB0aGlzLl9yZW5kZXJlcihjYXJkcyk7XG4gICAgfVxufSIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3Ioe25hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIHVzZXJBdmF0YXJ9KSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2pvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJBdmF0YXIpO1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuXG4gICAgICAgIGNvbnN0IHVzZXJJbmZvID0ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGpvYjogdGhpcy5fam9iLnRleHRDb250ZW50LFxuICAgICAgICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXIuc3R5bGUuYmFja2dyb3VuZEltYWdlLnNsaWNlKDUsLTIpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB1c2VySW5mbzsgICBcbiAgICB9XG5cbiAgIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICAgICAgdGhpcy5fYXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtkYXRhLmF2YXRhcn0pYDtcbiAgICB9XG59IiwiaW1wb3J0IHtQb3B1cH0gZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cEZvcm1TdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXR9KXtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB9XG5cbiAgICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBhY3Rpb247XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLnNldFN1Ym1pdEFjdGlvbigpKTtcbiAgICAgICAgfSlcbiAgICB9XG59XG4iLCJjb25zdCBwb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfaW1hZ2UnKTtcbmNvbnN0IGVsZW1lbnRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKTtcblxuLy/Qv9C+0LvRjyDQsiDQv9GA0L7RhNC40LvQtSAo0LDQstGC0L7QvNCw0YLQuNGH0LXRgdC60LjQtSlcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcbmNvbnN0IHByb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fd29yaycpO1xuXG4vL9C00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0L/QvtC/0LDQv9C+0Lwg0LTQu9GPINGB0L7Qt9C00LDQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCDQvdC+0LLQvtCz0L4g0LzQtdGB0YLQsFxuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtYnV0dG9uJyk7XG5cbi8v0LTQu9GPINGA0LDQsdC+0YLRiyDRgSDQv9C+0L/QsNC/0L7QvCDQtNC70Y8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xuZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1idXR0b24nKTtcbmNvbnN0IHBvcHVwRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2VkaXQnKTtcbmNvbnN0IGZvcm1OYW1lID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGFpbmVyJyk7XG5cbi8v0L/QvtC70Y8g0LIg0L/RgNC+0YTQuNC70LUgKNC00LvRjyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPKVxuY29uc3QgbmFtZUlucHV0ID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZGF0YV9uYW1lJyk7XG5jb25zdCBqb2JJbnB1dCA9IHBvcHVwRWRpdC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2RhdGFfam9iJyk7XG5cbi8v0L/QvtC70Y8g0L/RgNC4INC00L7QsdCw0LLQu9C10L3QuNC4INC60LDRgtC+0YfQutC4INGBINC80LXRgdGC0L7QvFxuY29uc3QgcGxhY2VJbnB1dCA9IHBvcHVwUGxhY2UucXVlcnlTZWxlY3RvcignLnBvcHVwX19kYXRhX3BsYWNlJyk7XG5jb25zdCBsaW5rSW5wdXQgPSBwb3B1cFBsYWNlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZGF0YV9saW5rJyk7XG5leHBvcnQgY29uc3Qgc3VibWl0UGxhY2UgPSBwb3B1cFBsYWNlLnF1ZXJ5U2VsZWN0b3IoJy5zdWJtaXQtYnV0dG9uJyk7XG5cbi8v0LTQu9GPINGA0LDQsdC+0YLRiyDRgSDQv9C+0L/QsNC/0L7QvCDQtNC70Y8g0YHQvNC10L3RiyDQsNCy0LDRgtCw0YDQsFxuZXhwb3J0IGNvbnN0IGF2YXRhckJsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmF2YXRhcicpO1xuZXhwb3J0IGNvbnN0IGF2YXRhclBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpO1xuXG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gICAgaXRlbVRlbXBsYXRlOiBcIi5lbGVtZW50XCIsXG4gICAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19jb250YWluZXInLFxuICAgIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2RhdGEnLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnN1Ym1pdC1idXR0b24nLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdzdWJtaXQtYnV0dG9uX2luYWN0aXZlJyxcbiAgICBlcnJvckNsYXNzOiAncG9wdXBfX2RhdGFfZXJyb3InLFxuICAgIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxuICAgIGZvcm1OYW1lU2VsZWN0b3I6ICcucG9wdXBfX2NvbnRhaW5lcl9uYW1lJyxcbiAgICBmb3JtUGxhY2VTZWxlY3RvcjogJy5wb3B1cF9fY29udGFpbmVyX3BsYWNlJyxcbiAgICBhdmF0YXJTZWxlY3RvcjogJy5wb3B1cF9fY29udGFpbmVyX2F2YXRhcidcbn1cblxuZXhwb3J0IHtwb3B1cEltYWdlLCBlbGVtZW50Q2FyZCwgcHJvZmlsZU5hbWUsIHByb2ZpbGVKb2IsIG5hbWVJbnB1dCwgam9iSW5wdXR9O1xuIiwiaW1wb3J0ICcuLi9wYWdlcy9pbmRleC5jc3MnO1xuaW1wb3J0IHtDYXJkfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IHtGb3JtVmFsaWRhdG9yfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IHtQb3B1cFdpdGhGb3JtfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IHtQb3B1cFdpdGhJbWFnZX0gZnJvbSAnLi4vY29tcG9uZW50cy9QaWN0dXJlUG9wdXAuanMnO1xuaW1wb3J0IHtTZWN0aW9ufSBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCB7UG9wdXBGb3JtU3VibWl0fSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwRm9ybVN1Ym1pdC5qcyc7XG5pbXBvcnQge25hbWVJbnB1dCwgam9iSW5wdXQsIGFkZEJ1dHRvbiwgZWRpdEJ1dHRvbiwgY29uZmlnLCBzdWJtaXRQbGFjZSwgYXZhdGFyQmxvY2ssIGF2YXRhclBob3RvfSBmcm9tICcuLi9zY3JpcHRzL2NvbnN0YW5zLmpzJztcbmltcG9ydCB7QXBpfSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcydcblxuLy9cbmNvbnN0IGFwaSA9IG5ldyBBcGkgKHtcbiAgICBhZHJlc3M6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28nLFxuICAgIHRva2VuOiAnMzE1MjkzNDgtZWQ0Mi00ZTExLWE3NTktZTU4MzgzNzgxZmYwJyxcbiAgICBjb2hvcnRJZCA6IGBjb2hvcnQtMThgXG59KVxuXG5sZXQgdXNlcklkO1xuXG4gICAgLy/QvtGC0YDQuNGB0L7QstC60LAg0YHQvtGF0YDQsNC90ZHQvdC90L7QuSDQs9Cw0LvQtdGA0LXQuCBcbiAgICBjb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbih7XG4gICAgICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG4gICAgICAgICAgICBjYXJkc0xpc3QuYWRkSXRlbShlbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICB9LCAnLmVsZW1lbnRzJyk7XG5cbi8v0LTQsNC90L3Ri9C1INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICAgIG5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJyxcbiAgICBqb2JTZWxlY3RvcjogJy5wcm9maWxlX193b3JrJyxcbiAgICB1c2VyQXZhdGFyOiAnLnByb2ZpbGVfX2F2YXRhcicsXG59KTtcblxuLy/Qv9C+0L/QsNC/INC00LvRjyDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbmNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cEZvcm1TdWJtaXQoe1xuICAgIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9kZWxldGUnLFxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6ICgpID0+IHtcbiAgICB9XG59KVxuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8v0YTRg9C90LrRhtC40Y8g0LTQu9GPINGB0L7Qt9C00LDQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XG4gICAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKHtcbiAgICAgICAgZGF0YSxcbiAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAodGV4dCwgbGluaykgPT4ge1xuICAgICAgICAgICAgaW1hZ2VDYXJkLm9wZW4odGV4dCwgbGluayk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZURlbGV0ZUNhcmRDbGljazogKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FyZElkID0gbmV3Q2FyZC5yZXR1cm5JZCgpO1xuICAgICAgICAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuZXdDYXJkLmRlbGV0ZUhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLmNsb3NlKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gYWxlcnQoYNCS0L4g0LLRgNC10LzRjyDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60Lgg0LLQvtC30L3QuNC60LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGVDYXJkUG9wdXAub3BlbigpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaGFuZGxlTGlrZUNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIW5ld0NhcmQuX2lzTGlrZWQoKSkge1xuICAgICAgICAgICAgICAgIGFwaS5jbGlja0xpa2UobmV3Q2FyZC5yZXR1cm5JZCgpKVxuICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NhcmQuc2V0TGlrZXNEYXRhKHsuLi5kYXRhfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGDQktC+INCy0YDQtdC80Y8g0LrQu9C40LrQsCDQv9C+INGB0LXRgNC00LXRh9C60YMg0L/RgNC+0LjQt9C+0YjQu9CwINC/0YDQvtCx0LvQtdC80LAgOiAke2Vycn1gKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFwaS5kZWxldGVMaWtlKG5ld0NhcmQucmV0dXJuSWQoKSlcbiAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuZXdDYXJkLnNldExpa2VzRGF0YSh7Li4uZGF0YX0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhg0JLQviDQstGA0LXQvNGPINC+0YLQvNC10L3RiyDQutC70LjQutCwINC/0YDQvtC40LfQvtGI0LvQsCDQv9GA0L7QsdC70LXQvNCwIDogJHtlcnJ9YCkpO1xuICAgICAgICAgICAgfSAgIFxuICAgICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgfSwgXCIuZWxlbWVudFwiLCB1c2VySWQpO1xuICAgICByZXR1cm4gbmV3Q2FyZC5nZXRFbGVtZW50KCk7XG5cbn1cblxuLy/QvtGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDRgSDQv9GA0L7RhNC40LvQtdC8XG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xuICAgIGpvYklucHV0LnZhbHVlID0gdXNlckRhdGEuam9iO1xuICAgIHdpbmRvd0VkaXQub3BlbigpO1xuXG59KVxuXG5hdmF0YXJCbG9jay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgd2luZG93QXZhdGFyLm9wZW4oKTtcbn0pO1xuXG5hdmF0YXJCbG9jay5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoKSA9PiB7XG4gICAgYXZhdGFyUGhvdG8uc3R5bGUub3BhY2l0eSA9ICcwLjQnO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LXBlbmNpbCcpLmNsYXNzTGlzdC5hZGQoJ2VkaXQtcGVuY2lsX2FjdGl2ZScpO1xufSlcblxuYXZhdGFyQmxvY2suYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoKSA9PiB7XG4gICAgYXZhdGFyUGhvdG8uc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1wZW5jaWwnKS5jbGFzc0xpc3QucmVtb3ZlKCdlZGl0LXBlbmNpbF9hY3RpdmUnKTtcbn0pXG5cbi8v0L/QvtC/0LDQvyDQtNC70Y8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQsNCy0LDRgtCw0YDQsFxuY29uc3Qgd2luZG93QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9hdmF0YXInLFxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgICAgIHdpbmRvd0F2YXRhci5fcmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICAgICAgY29uc3QgdXNlckF2YXRhckxpbmsgPSBkYXRhLmxpbmtJbnB1dDtcbiAgICAgICAgYXBpLmNoYW5nZVVzZXJBdmF0YXIodXNlckF2YXRhckxpbmspXG4gICAgICAgIC50aGVuKChpbmZvKSA9PiB7XG4gICAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgICAgICAgICAgbmFtZTogaW5mby5uYW1lLFxuICAgICAgICAgICAgICAgIGFib3V0OiBpbmZvLmFib3V0LFxuICAgICAgICAgICAgICAgIGF2YXRhcjogaW5mby5hdmF0YXJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB3aW5kb3dBdmF0YXIuY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoICgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfQntGI0LjQsdC60LAg0L/RgNC4INC40LfQvNC10L3QtdC90LjQuCDQsNCy0LDRgtCw0YDQsCcpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3dBdmF0YXIuX3JlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgIH0pO1xuICAgIH1cbn0pXG53aW5kb3dBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy/Qv9C+0L/QsNC/INC00LvRjyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxuY29uc3Qgd2luZG93RWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfZWRpdCcsXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICAgICAgd2luZG93RWRpdC5fcmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICAgICAgY29uc3QgbmFtZVVzZXIgPSBkYXRhLm5hbWVJbnB1dDtcbiAgICAgICAgY29uc3Qgam9iVXNlciA9IGRhdGEuam9iSW5wdXQ7XG4gICAgICAgIGFwaS5zZXRVc2VyUHJvZmlsZShuYW1lVXNlciwgam9iVXNlcilcbiAgICAgICAgICAgIC50aGVuKChpbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpbmZvLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGFib3V0OiBpbmZvLmFib3V0LFxuICAgICAgICAgICAgICAgICAgICBhdmF0YXI6IGluZm8uYXZhdGFyXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB3aW5kb3dFZGl0LmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2ggKChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygn0J7RiNC40LHQutCwINC/0YDQuCDQuNC30LzQtdC90LXQvdC40Lgg0LTQsNC90L3Ri9GFINC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtScpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICB3aW5kb3dFZGl0Ll9yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH1cbn0pO1xud2luZG93RWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9C+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgIHdpbmRvd0FkZC5vcGVuKCk7XG4gICAgbWFrZUJ1dHRvbkluYWN0aXZlKHN1Ym1pdFBsYWNlKTtcblxufSk7XG5cbi8v0L/QvtC/0LDQvyDQtNC70Y8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuY29uc3Qgd2luZG93QWRkID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9wbGFjZScsXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICAgICAgd2luZG93QWRkLl9yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgICAgICBjb25zdCBuYW1lRGF0YSA9IGRhdGEucGxhY2VJbnB1dDtcbiAgICAgICAgY29uc3QgbGlua0RhdGEgPSBkYXRhLmxpbmtJbnB1dDtcbiAgICAgICAgYXBpLmFkZENhcmQobmFtZURhdGEsIGxpbmtEYXRhKVxuICAgICAgICAgICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FyZHNMaXN0LnByZXBlbmRDYXJkKGNyZWF0ZUNhcmQoY2FyZERhdGEpKTtcbiAgICAgICAgICAgICAgICB3aW5kb3dBZGQuY2xvc2UoKTtcbiAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwINC00L7QsdCw0LLQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60Lg6ICR7ZXJyfWApKVxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHdpbmRvd0FkZC5fcmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgIH19KTtcbndpbmRvd0FkZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9GB0L7Qt9C00LDQvdC40LUg0L/QvtC/0LDQv9CwINC00LvRjyDRg9Cy0LXQu9C40YfQtdC90L3QvtC5INC60LDRgNGC0LjQvdC60LhcbmNvbnN0IGltYWdlQ2FyZCA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfaW1hZ2UnKTtcbmltYWdlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9Cw0LrRgtC40LLQvdCw0Y8g0LrQvdC+0L/QutCwXG5mdW5jdGlvbiBtYWtlQnV0dG9uSW5hY3RpdmUgKGJ1dHRvbkVsZW1lbnQpIHtcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3N1Ym1pdC1idXR0b25faW5hY3RpdmUnKTtcbiAgICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbn1cblxuY29uc3QgZm9ybVBsYWNlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBjb25maWcuZm9ybVBsYWNlU2VsZWN0b3IpO1xuZm9ybVBsYWNlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKVxuXG5jb25zdCBmb3JtTmFtZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgY29uZmlnLmZvcm1OYW1lU2VsZWN0b3IpO1xuZm9ybU5hbWVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXG5cbmNvbnN0IGZvcm1BdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNvbmZpZy5hdmF0YXJTZWxlY3Rvcik7XG5mb3JtQXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKVxuXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJQcm9maWxlKCksIGFwaS5nZXRDYXJkcygpXSlcbi50aGVuKFxuICAgIChbZGF0YSwgY2FyZHNdKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgICAgIHVzZXJJZCA9IGRhdGEuX2lkO1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgICAgICBhYm91dDogZGF0YS5hYm91dCxcbiAgICAgICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIsXG4gICAgICAgIH0pO1xuICAgICAgICBjYXJkc0xpc3QucmVuZGVySXRlbXMoY2FyZHMpO1xuICAgIH1cbilcbi5jYXRjaChlcnIgPT4ge1xuICAgIGFsZXJ0KGVycik7XG59KVxuXG4iLCJleHBvcnQgY2xhc3MgQXBpIHtcbiAgICBjb25zdHJ1Y3Rvcih7YWRyZXNzLCB0b2tlbiwgY29ob3J0SWR9KSB7XG4gICAgICAgIHRoaXMuX3Rva2VuID0gdG9rZW47XG4gICAgICAgIHRoaXMuX2FkcmVzcyA9IGFkcmVzcztcbiAgICAgICAgdGhpcy5fY29ob3J0SWQgPSBjb2hvcnRJZDtcbiAgICB9XG5cbiAgICBfZ2V0UmVzcG9uc2VEYXRhKHJlcykge1xuICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9IFxuXG4gICAgYWRkQ2FyZChuYW1lLCBsaW5rKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9hZHJlc3N9L3YxLyR7dGhpcy5fY29ob3J0SWR9L2NhcmRzYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSlcbiAgICB9XG5cbiAgICBkZWxldGVDYXJkKGlkKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9hZHJlc3N9L3YxLyR7dGhpcy5fY29ob3J0SWR9L2NhcmRzLyR7aWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2VEYXRhKVxuICAgIH1cbiAgICAgICAgXG5cbiAgICBnZXRDYXJkcygpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2FkcmVzc30vdjEvJHt0aGlzLl9jb2hvcnRJZH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW5cbiAgICAgICAgICAgICAgfVxuICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGlmICghcmVzdWx0Lm9rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdTZXJ2ZXIgZXJyb3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuanNvbigpO1xuICAgICAgICB9KS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBnZXRVc2VyUHJvZmlsZSgpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2FkcmVzc30vdjEvJHt0aGlzLl9jb2hvcnRJZH0vdXNlcnMvbWVgLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuXG4gICAgICAgICAgfSxcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSlcbiAgfVxuXG4gIHNldFVzZXJQcm9maWxlKG5hbWUsIGFib3V0KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2FkcmVzc30vdjEvJHt0aGlzLl9jb2hvcnRJZH0vdXNlcnMvbWVgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBhYm91dCxcbiAgICAgICAgfSksXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9nZXRSZXNwb25zZURhdGEpXG4gIH1cblxuICBjbGlja0xpa2UoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYWRyZXNzfS92MS8ke3RoaXMuX2NvaG9ydElkfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIH1cbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSlcbiAgfVxuXG4gIGRlbGV0ZUxpa2UoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYWRyZXNzfS92MS8ke3RoaXMuX2NvaG9ydElkfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIH1cbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSlcbiAgfVxuICBcblxuICBjaGFuZ2VVc2VyQXZhdGFyKGF2YXRhcikge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9hZHJlc3N9L3YxLyR7dGhpcy5fY29ob3J0SWR9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgYXZhdGFyXG4gICAgfSlcbiAgICB9KVxuICAgICAgICAudGhlbih0aGlzLl9nZXRSZXNwb25zZURhdGEpXG4gICAgfVxuXG5cbn0iXSwic291cmNlUm9vdCI6IiJ9